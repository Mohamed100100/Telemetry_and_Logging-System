# Phase 5: Telemetry Over Network (vSOME/IP)

## ğŸ“‹ Overview

Phase 5 extends the telemetry system with **network-based data acquisition** using the **vSOME/IP** middleware and **CommonAPI** abstraction layer. This phase introduces service-oriented communication patterns used extensively in automotive and embedded systems.

## ğŸ¯ Goals

1. **Create a network data source** that fetches telemetry through vSOME/IP
2. **Implement Singleton Pattern** for application-wide single client instance
3. **Implement Adapter Pattern** to integrate with existing `ITelemetrySource` interface
4. **Utilize CommonAPI code generation** from Franca IDL files

## ğŸ“š C++ Concepts Covered

### Libraries

| Library | Purpose | Description |
|---------|---------|-------------|
| `vsomeip` | SOME/IP Implementation | Scalable service-Oriented MiddlewarE over IP |
| `CommonAPI Core` | Abstract Interface | Language binding independent API |
| `CommonAPI-SomeIP` | SOME/IP Binding | Connects CommonAPI to vsomeip backend |

### Design Patterns

| Pattern | Implementation | Purpose |
|---------|----------------|---------|
| **Singleton** | `SomeIPTelemetrySourceImpl` | Single client instance for entire application lifetime |
| **Adapter** | `SomeIPTelemetrySourceAdapter` | Bridge SOME/IP client to `ITelemetrySource` interface |
| **Proxy** | Generated `TelemetryServiceProxy` | Abstract remote service calls |
| **Stub** | Generated `TelemetryServiceStubDefault` | Provide service implementation hooks |
| **Factory** | `CommonAPI::Runtime::get()` | Create runtime and proxy instances |

---

## ğŸŒ SOME/IP Architecture

### What is SOME/IP?

**SOME/IP** (Scalable service-Oriented MiddlewarE over IP) is a middleware solution designed for automotive applications that enables service-oriented communication over IP networks.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SOME/IP COMMUNICATION MODEL                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚         CLIENT              â”‚         â”‚          SERVER             â”‚   â”‚
â”‚   â”‚   (TelemetrySourceImpl)     â”‚         â”‚   (TelemetryServiceImpl)    â”‚   â”‚
â”‚   â”‚                             â”‚         â”‚                             â”‚   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚   â”‚  â”‚   CommonAPI Proxy     â”‚  â”‚         â”‚  â”‚   CommonAPI Stub      â”‚  â”‚   â”‚
â”‚   â”‚  â”‚  (Generated Code)     â”‚  â”‚         â”‚  â”‚  (Generated Code)     â”‚  â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚   â”‚              â”‚              â”‚         â”‚              â”‚              â”‚   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚   â”‚  â”‚  CommonAPI-SomeIP     â”‚  â”‚         â”‚  â”‚  CommonAPI-SomeIP     â”‚  â”‚   â”‚
â”‚   â”‚  â”‚     Binding           â”‚  â”‚         â”‚  â”‚     Binding           â”‚  â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚   â”‚              â”‚              â”‚         â”‚              â”‚              â”‚   â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚         â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚   â”‚
â”‚   â”‚  â”‚      vsomeip          â”‚  â”‚         â”‚  â”‚      vsomeip          â”‚  â”‚   â”‚
â”‚   â”‚  â”‚   (SOME/IP Stack)     â”‚  â”‚         â”‚  â”‚   (SOME/IP Stack)     â”‚  â”‚   â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚         â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                  â”‚                                       â”‚                  â”‚
â”‚                  â”‚         IP NETWORK (UDP/TCP)          â”‚                  â”‚
â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                                                             â”‚
â”‚   Communication: Method Request/Response (Synchronous)                      â”‚
â”‚   Transport: UDP (unreliable) or TCP (reliable)                             â”‚
â”‚   Discovery: Service Discovery Protocol (SD)                                â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Communication Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    METHOD REQUEST/RESPONSE FLOW                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   CLIENT                                              SERVER                â”‚
â”‚   â•â•â•â•â•â•                                              â•â•â•â•â•â•                â”‚
â”‚                                                                             â”‚
â”‚   1. Build Proxy                                      1. Register Service   â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚      â”‚ buildProxy<T>() â”‚                                 â”‚registerService()â”‚â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚               â”‚                                                   â”‚         â”‚
â”‚   2. Wait for Availability                            2. Announce Service   â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     Service Discovery           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚      â”‚ isAvailable()   â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚  SD Multicast   â”‚â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚               â”‚                                                   â”‚         â”‚
â”‚   3. Call Method                                      3. Receive Request    â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     SOME/IP Request             â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚      â”‚ proxy->getLoad()â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ getLoad() impl  â”‚â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚               â”‚                                                   â”‚         â”‚
â”‚   4. Receive Response                                 4. Send Response      â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     SOME/IP Response            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚      â”‚ loadValue = 45  â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ _reply(cpuLoad) â”‚â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ›ï¸ Design Patterns

### 1. Singleton Pattern

The **Singleton Pattern** ensures a class has only one instance and provides a global point of access to it.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SINGLETON PATTERN                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                  SomeIPTelemetrySourceImpl                          â”‚   â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚   â”‚  PRIVATE:                                                           â”‚   â”‚
â”‚   â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€                                                          â”‚   â”‚
â”‚   â”‚  â€¢ Constructor()     â—„â”€â”€ Cannot create from outside                 â”‚   â”‚
â”‚   â”‚  â€¢ Destructor()      â—„â”€â”€ Cannot delete from outside                 â”‚   â”‚
â”‚   â”‚  â€¢ Copy ctor         = delete                                       â”‚   â”‚
â”‚   â”‚  â€¢ Move ctor         = delete                                       â”‚   â”‚
â”‚   â”‚  â€¢ Copy assignment   = delete                                       â”‚   â”‚
â”‚   â”‚  â€¢ Move assignment   = delete                                       â”‚   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â”‚  PUBLIC:                                                            â”‚   â”‚
â”‚   â”‚  â”€â”€â”€â”€â”€â”€â”€                                                            â”‚   â”‚
â”‚   â”‚  static Instance& getInstance() {                                   â”‚   â”‚
â”‚   â”‚      static Instance instance;  â—„â”€â”€ Created once, lives forever     â”‚   â”‚
â”‚   â”‚      return instance;                                               â”‚   â”‚
â”‚   â”‚  }                                                                  â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚   USAGE:                                                                    â”‚
â”‚   â•â•â•â•â•â•                                                                    â”‚
â”‚                                                                             â”‚
â”‚   // All calls return the SAME instance                                     â”‚
â”‚   auto& client1 = SomeIPTelemetrySourceImpl::getInstance();                 â”‚
â”‚   auto& client2 = SomeIPTelemetrySourceImpl::getInstance();                 â”‚
â”‚   // client1 and client2 are references to the same object!                 â”‚
â”‚                                                                             â”‚
â”‚   // These would NOT compile:                                               â”‚
â”‚   SomeIPTelemetrySourceImpl obj;                    // âŒ Private ctor      â”‚
â”‚   SomeIPTelemetrySourceImpl copy = client1;         // âŒ Deleted           â”‚
â”‚   SomeIPTelemetrySourceImpl moved = std::move(c1);  // âŒ Deleted           â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Why Singleton for SOME/IP Client?

| Reason | Explanation |
|--------|-------------|
| **Single Connection** | Only one vsomeip runtime instance should exist per application |
| **Resource Management** | Proxy and runtime resources are expensive to create |
| **Application Lifetime** | Client needs to persist for the entire application |
| **Thread Safety** | Centralized access point simplifies synchronization |

### 2. Adapter Pattern

The **Adapter Pattern** converts the interface of a class into another interface that clients expect.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          ADAPTER PATTERN                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   PROBLEM: Interface Mismatch                                               â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                               â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚   â”‚   ITelemetrySource    â”‚              â”‚ SomeIPTelemetrySource â”‚          â”‚
â”‚   â”‚   (Expected Interface)â”‚              â”‚   Impl (Actual)       â”‚          â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤              â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤          â”‚
â”‚   â”‚ + openSource(): bool  â”‚      â‰        â”‚ + init(): bool        â”‚          â”‚
â”‚   â”‚ + readSource(&): bool â”‚              â”‚ + connect(): bool     â”‚          â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚ + requestTelemetry(): â”‚          â”‚
â”‚                                          â”‚     string            â”‚          â”‚
â”‚                                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                             â”‚
â”‚   SOLUTION: Adapter Class                                                   â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                   â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚                  SomeIPTelemetrySourceAdapter                       â”‚   â”‚
â”‚   â”‚                      implements ITelemetrySource                    â”‚   â”‚
â”‚   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚
â”‚   â”‚   â”‚  SomeIPTelemetrySourceImpl& impl_  (reference to singleton) â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â”‚   openSource() â”€â”€â”€â”€â”€â”€â”                                              â”‚   â”‚
â”‚   â”‚                      â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚   â”‚
â”‚   â”‚                      â””â”€â”€â”€â–¶â”‚ return impl_.init() &&           â”‚      â”‚   â”‚
â”‚   â”‚                           â”‚        impl_.connect();          â”‚      â”‚   â”‚
â”‚   â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â”‚   readSource(data&) â”€â”                                              â”‚   â”‚
â”‚   â”‚                      â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚   â”‚
â”‚   â”‚                      â””â”€â”€â”€â–¶â”‚ data = impl_.requestTelemetry(); â”‚      â”‚   â”‚
â”‚   â”‚                           â”‚ return !data.empty();            â”‚      â”‚   â”‚
â”‚   â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚   â”‚
â”‚   â”‚                                                                     â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚   NOW: Seamless Integration with Existing System                            â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                            â”‚
â”‚                                                                             â”‚
â”‚   std::unique_ptr<ITelemetrySource> source =                                â”‚
â”‚       std::make_unique<SomeIPTelemetrySourceAdapter>();                     â”‚
â”‚                                                                             â”‚
â”‚   source->openSource();           // Works!                                 â”‚
â”‚   source->readSource(data);       // Works!                                 â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Method Mapping

| ITelemetrySource | Adapter Implementation | SomeIPTelemetrySourceImpl |
|------------------|------------------------|---------------------------|
| `openSource()` | Combines init + connect | `init()` â†’ `connect()` |
| `readSource(string&)` | Calls and validates | `requestTelemetry()` |

---

## ğŸ“¦ Deliverables

### Class Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       PHASE 5 CLASS HIERARCHY                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                        INTERFACES                                     â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚  â”‚
â”‚  â”‚     â”‚    <<interface>>        â”‚        â”‚    <<generated>>        â”‚    â”‚  â”‚
â”‚  â”‚     â”‚   ITelemetrySource      â”‚        â”‚ TelemetryServiceStub    â”‚    â”‚  â”‚
â”‚  â”‚     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚       Default           â”‚    â”‚  â”‚
â”‚  â”‚     â”‚ + openSource(): bool    â”‚        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚  â”‚
â”‚  â”‚     â”‚ + readSource(&): bool   â”‚        â”‚ + getLoad(client,reply) â”‚    â”‚  â”‚
â”‚  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â”‚
â”‚  â”‚                 â”‚                                  â”‚                  â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                    â”‚                                  â”‚                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                 â”‚         IMPLEMENTATIONS          â”‚                  â”‚  â”‚
â”‚  â”‚                 â”‚                                  â”‚                  â”‚  â”‚
â”‚  â”‚                 â–¼                                  â–¼                  â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
â”‚  â”‚  â”‚ SomeIPTelemetrySourceAdapter â”‚   â”‚   TelemetryServiceImpl       â”‚  â”‚  â”‚
â”‚  â”‚  â”‚       <<Adapter>>            â”‚   â”‚        <<Server>>            â”‚  â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”‚
â”‚  â”‚  â”‚ - impl_: Impl&               â”‚   â”‚ - GetCpuLoad(): uint8_t      â”‚  â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”‚
â”‚  â”‚  â”‚ + openSource(): bool         â”‚   â”‚ + getLoad(client, reply)     â”‚  â”‚  â”‚
â”‚  â”‚  â”‚ + readSource(&): bool        â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚  â”‚
â”‚  â”‚                 â”‚ uses                                                â”‚  â”‚
â”‚  â”‚                 â–¼                                                     â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                     â”‚  â”‚
â”‚  â”‚  â”‚ SomeIPTelemetrySourceImpl    â”‚                                     â”‚  â”‚
â”‚  â”‚  â”‚       <<Singleton>>          â”‚                                     â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                     â”‚  â”‚
â”‚  â”‚  â”‚ - runtime_: shared_ptr       â”‚                                     â”‚  â”‚
â”‚  â”‚  â”‚ - proxy_: shared_ptr         â”‚                                     â”‚  â”‚
â”‚  â”‚  â”‚ - connected_: bool           â”‚                                     â”‚  â”‚
â”‚  â”‚  â”‚ - initialized_: bool         â”‚                                     â”‚  â”‚
â”‚  â”‚  â”‚ - mutex_: std::mutex         â”‚                                     â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                     â”‚  â”‚
â”‚  â”‚  â”‚ - SomeIPTelemetrySourceImpl()â”‚  â—„â”€â”€ Private constructor            â”‚  â”‚
â”‚  â”‚  â”‚ - ~SomeIPTelemetrySourceImpl()â”‚ â—„â”€â”€ Private destructor             â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                                     â”‚  â”‚
â”‚  â”‚  â”‚ + getInstance(): Impl&       â”‚  â—„â”€â”€ Static accessor                â”‚  â”‚
â”‚  â”‚  â”‚ + init(): bool               â”‚                                     â”‚  â”‚
â”‚  â”‚  â”‚ + connect(): bool            â”‚                                     â”‚  â”‚
â”‚  â”‚  â”‚ + disconnect(): void         â”‚                                     â”‚  â”‚
â”‚  â”‚  â”‚ + requestTelemetry(): string â”‚                                     â”‚  â”‚
â”‚  â”‚  â”‚ + isConnected(): bool        â”‚                                     â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                     â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                     GENERATED CLASSES (CommonAPI)                     â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚  â”‚
â”‚  â”‚  â”‚  TelemetryServiceProxy  â”‚        â”‚ TelemetryServiceSomeIP  â”‚       â”‚  â”‚
â”‚  â”‚  â”‚      <<Proxy>>          â”‚        â”‚     StubAdapter         â”‚       â”‚  â”‚
â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚  â”‚
â”‚  â”‚  â”‚ + isAvailable(): bool   â”‚        â”‚ (Handles SOME/IP        â”‚       â”‚  â”‚
â”‚  â”‚  â”‚ + getLoad(status, val)  â”‚        â”‚  serialization)         â”‚       â”‚  â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚  â”‚
â”‚  â”‚                                                                       â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Component Descriptions

#### 1. SomeIPTelemetrySourceImpl (Singleton Client)

| Aspect | Description |
|--------|-------------|
| **Purpose** | SOME/IP client for telemetry data acquisition |
| **Pattern** | Singleton |
| **Thread Safety** | Mutex-protected operations |

| Member | Type | Description |
|--------|------|-------------|
| `runtime_` | `shared_ptr<CommonAPI::Runtime>` | CommonAPI runtime instance |
| `proxy_` | `shared_ptr<TelemetryServiceProxy<>>` | Proxy to remote service |
| `connected_` | `bool` | Connection state flag |
| `initialized_` | `bool` | Initialization state flag |
| `mutex_` | `std::mutex` | Thread synchronization |

| Method | Return | Description |
|--------|--------|-------------|
| `getInstance()` | `Impl&` | Returns singleton instance |
| `init()` | `bool` | Initialize runtime and build proxy |
| `connect()` | `bool` | Wait for service availability |
| `disconnect()` | `void` | Release proxy and reset state |
| `requestTelemetry()` | `string` | Call `getLoad()` and return result |
| `isConnected()` | `bool` | Check connection status |

| Special Member | Status | Reason |
|----------------|--------|--------|
| Default Constructor | Private | Singleton - only `getInstance()` creates |
| Destructor | Private | Cleanup handled by static lifetime |
| Copy Constructor | Deleted | Only one instance allowed |
| Move Constructor | Deleted | Cannot move singleton |
| Copy Assignment | Deleted | Cannot copy singleton |
| Move Assignment | Deleted | Cannot move singleton |

#### 2. SomeIPTelemetrySourceAdapter

| Aspect | Description |
|--------|-------------|
| **Purpose** | Adapt SOME/IP client to `ITelemetrySource` interface |
| **Pattern** | Adapter |
| **Implements** | `ITelemetrySource` |

| Member | Type | Description |
|--------|------|-------------|
| `impl_` | `SomeIPTelemetrySourceImpl&` | Reference to singleton |

| Method | Implementation | Description |
|--------|----------------|-------------|
| `openSource()` | `impl_.init() && impl_.connect()` | Initialize and connect |
| `readSource(string&)` | `impl_.requestTelemetry()` | Get telemetry data |

#### 3. TelemetryServiceImpl (Server)

| Aspect | Description |
|--------|-------------|
| **Purpose** | Provide telemetry data to clients |
| **Inherits** | `TelemetryServiceStubDefault` |
| **Data Source** | `/proc/stat` (Linux CPU statistics) |

| Method | Description |
|--------|-------------|
| `getLoad(client, reply)` | Handle client request, return CPU load |
| `GetCpuLoad()` | Parse `/proc/stat` for CPU usage percentage |

---

## ğŸ“„ Franca IDL Configuration

### Interface Definition (TelemetryService.fidl)

```fidl
package log

interface TelemetryService {
    version {major 1 minor 0}

    method getLoad {
        out {
            UInt8 loadPercentage
        }
    }
}
```

| Element | Value | Description |
|---------|-------|-------------|
| Package | `log` | Namespace for generated code |
| Interface | `TelemetryService` | Service interface name |
| Version | 1.0 | Interface version |
| Method | `getLoad` | Request CPU load percentage |
| Output | `UInt8 loadPercentage` | 0-100 percentage value |

### Deployment Specification (TelemetryService.fdepl)

| Configuration | Value | Description |
|---------------|-------|-------------|
| Service ID | `0x4666` | Unique service identifier |
| Method ID | `0x01` | `getLoad` method identifier |
| Instance ID | `0x01` | Service instance identifier |
| Unicast Address | `127.0.0.1` | Local loopback |
| TCP Port | `30501` | Reliable communication |
| UDP Port | `30502` | Unreliable communication |

---

## âš™ï¸ Configuration Files

### CommonAPI Configuration (commonapi.ini)

```ini
[logging]
console = false
level = fatal

[default]
binding = someip
```

### vsomeip Configuration (vsomeip.json)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      VSOMEIP CONFIGURATION                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   APPLICATIONS:                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚   â”‚  Server              â”‚  Client              â”‚                           â”‚
â”‚   â”‚  name: "server"      â”‚  name: "client"      â”‚                           â”‚
â”‚   â”‚  id: 0x1277          â”‚  id: 0x1255          â”‚                           â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                                                                             â”‚
â”‚   SERVICE:                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚   â”‚  service: 0x4666                           â”‚                            â”‚
â”‚   â”‚  instance: 0x01                            â”‚                            â”‚
â”‚   â”‚  unreliable (UDP): 30502                   â”‚                            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                                             â”‚
â”‚   ROUTING: "server" (server is routing manager)                             â”‚
â”‚                                                                             â”‚
â”‚   SERVICE DISCOVERY:                                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
â”‚   â”‚  multicast: 224.224.224.245                â”‚                            â”‚
â”‚   â”‚  port: 30490                               â”‚                            â”‚
â”‚   â”‚  protocol: UDP                             â”‚                            â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                            â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ System Flow

### Complete Data Flow

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PHASE 5 COMPLETE DATA FLOW                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                        SERVER PROCESS                               â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â”‚   /proc/stat â”€â”€â–¶ TelemetryServiceImpl â”€â”€â–¶ SOME/IP Stack             â”‚    â”‚
â”‚  â”‚                         â”‚                        â”‚                  â”‚    â”‚
â”‚  â”‚                    GetCpuLoad()            vsomeip runtime          â”‚    â”‚
â”‚  â”‚                         â”‚                        â”‚                  â”‚    â”‚
â”‚  â”‚                    uint8_t (0-100)               â”‚                  â”‚    â”‚
â”‚  â”‚                                                  â”‚                  â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                     â”‚                       â”‚
â”‚                                              IP NETWORK                     â”‚
â”‚                                              (UDP/30502)                    â”‚
â”‚                                                     â”‚                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚                        CLIENT PROCESS            â”‚                  â”‚    â”‚
â”‚  â”‚                                                  â”‚                  â”‚    â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚   â”‚              SomeIPTelemetrySourceImpl (Singleton)           â”‚  â”‚    â”‚
â”‚  â”‚   â”‚                                                              â”‚  â”‚    â”‚
â”‚  â”‚   â”‚   CommonAPI Runtime â”€â”€â–¶ Proxy â”€â”€â–¶ getLoad() â”€â”€â–¶ "45"         â”‚  â”‚    â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â”‚                                    â”‚                                â”‚    â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚   â”‚              SomeIPTelemetrySourceAdapter                    â”‚  â”‚    â”‚
â”‚  â”‚   â”‚                                                              â”‚  â”‚    â”‚
â”‚  â”‚   â”‚   openSource() â”€â”€â–¶ init() + connect()                        â”‚  â”‚    â”‚
â”‚  â”‚   â”‚   readSource()  â”€â”€â–¶ requestTelemetry() â”€â”€â–¶ "45"              â”‚  â”‚    â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â”‚                                    â”‚                                â”‚    â”‚
â”‚  â”‚                                    â”‚ ITelemetrySource interface     â”‚    â”‚
â”‚  â”‚                                    â–¼                                â”‚    â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
â”‚  â”‚   â”‚                  Existing Logging System                     â”‚  â”‚    â”‚
â”‚  â”‚   â”‚                                                              â”‚  â”‚    â”‚
â”‚  â”‚   â”‚   LogFormatter<CpuPolicy> â”€â”€â–¶ LogMessage â”€â”€â–¶ LogManager      â”‚  â”‚    â”‚
â”‚  â”‚   â”‚                                                â”‚             â”‚  â”‚    â”‚
â”‚  â”‚   â”‚                                          â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”       â”‚  â”‚    â”‚
â”‚  â”‚   â”‚                                          â–¼           â–¼       â”‚  â”‚    â”‚
â”‚  â”‚   â”‚                                     Console       File       â”‚  â”‚    â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
â”‚  â”‚                                                                     â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Initialization Sequence

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    INITIALIZATION SEQUENCE                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   SERVER                                          CLIENT                    â”‚
â”‚   â•â•â•â•â•â•                                          â•â•â•â•â•â•                    â”‚
â”‚                                                                             â”‚
â”‚   1. Create TelemetryServiceImpl                                            â”‚
â”‚      â”‚                                                                      â”‚
â”‚   2. runtime->registerService()                                             â”‚
â”‚      â”‚                                                                      â”‚
â”‚   3. Start listening â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚
â”‚      â”‚                                             â”‚                        â”‚
â”‚      â”‚                                   1. SomeIPTelemetrySourceAdapter()  â”‚
â”‚      â”‚                                             â”‚                        â”‚
â”‚      â”‚                                   2. getInstance() â”€â”€â–¶ Singleton     â”‚
â”‚      â”‚                                             â”‚                        â”‚
â”‚      â”‚                                   3. openSource()                    â”‚
â”‚      â”‚                                             â”‚                        â”‚
â”‚      â”‚                                   4. init()                          â”‚
â”‚      â”‚                                      â€¢ Runtime::get()                â”‚
â”‚      â”‚                                      â€¢ buildProxy<>()                â”‚
â”‚      â”‚                                             â”‚                        â”‚
â”‚      â”‚                                   5. connect()                       â”‚
â”‚      â”‚         Service Discovery                   â”‚                        â”‚
â”‚      â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                        â”‚
â”‚      â”‚                                             â”‚                        â”‚
â”‚   4. Announce availability â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚                        â”‚
â”‚      â”‚                                             â”‚                        â”‚
â”‚      â”‚                                   6. isAvailable() == true           â”‚
â”‚      â”‚                                             â”‚                        â”‚
â”‚   5. Ready for requests                  7. Ready to read                   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ Build Instructions

### Prerequisites

| Requirement | Description |
|-------------|-------------|
| CommonAPI | Core runtime library |
| CommonAPI-SomeIP | SOME/IP binding |
| vsomeip3 | SOME/IP stack implementation |
| CommonAPI Code Generator | For generating stubs/proxies |

### Build Steps

```bash
# Step 1: Generate code from Franca IDL (if not already generated)
# commonapi-core-generator -sk ./fidl/TelemetryService.fidl
# commonapi-someip-generator ./fidl/TelemetryService.fdepl

# Step 2: Build the server
cmake -S ./src/services -B build/server
cmake --build build/server

# Step 3: Build the client (as part of main project)
cmake -S ./examples -B build -DApp_Source_File=phase5_demo.cpp
cmake --build build
```

### Running

```bash
# Terminal 1: Start the server
export VSOMEIP_CONFIGURATION=./vsomeip.json
export VSOMEIP_APPLICATION_NAME=server
./build/server/ServerSomeIp

# Terminal 2: Run the client
export VSOMEIP_CONFIGURATION=./vsomeip.json
export VSOMEIP_APPLICATION_NAME=client
./build/Demo
```

---

## ğŸ’» Usage

### Basic Usage with Adapter

```cpp
#include "sources/SomeIPTelemetrySourceAdapter.hpp"
#include "formatter/LogFormatter.hpp"
#include "formatter/policies/CpuPolicy.hpp"

int main() {
    // Create adapter (uses singleton internally)
    SomeIPTelemetrySourceAdapter source;
    
    // Open connection to SOME/IP service
    if (!source.openSource()) {
        std::cerr << "Failed to connect to telemetry service" << std::endl;
        return 1;
    }
    
    // Read telemetry data
    std::string data;
    if (source.readSource(data)) {
        std::cout << "CPU Load: " << data << "%" << std::endl;
    }
    
    // Integrate with existing logging system
    LogFormatter<CpuPolicy> formatter("MyApp");
    auto logMsg = formatter.formatDataToLogMsg(data);
    
    if (logMsg.has_value()) {
        logManager->log(logMsg.value());
    }
    
    return 0;
}
```

### Direct Singleton Usage

```cpp
#include "sources/SomeIPTelemetrySourceImpl.hpp"

int main() {
    // Get singleton instance
    auto& client = SomeIPTelemetrySourceImpl::getInstance();
    
    // Initialize and connect
    if (!client.init()) {
        return 1;
    }
    
    if (!client.connect()) {
        return 1;
    }
    
    // Request telemetry
    while (running) {
        std::string load = client.requestTelemetry();
        if (!load.empty()) {
            std::cout << "CPU: " << load << "%" << std::endl;
        }
        std::this_thread::sleep_for(std::chrono::seconds(1));
    }
    
    // Cleanup (optional - handled by singleton destructor)
    client.disconnect();
    
    return 0;
}
```

### Expected Output

**Server:**
```
========================================
   Telemetry Service Server            
========================================
[Server] âœ“ Service registered successfully!
[Server] Waiting for clients... (Ctrl+C to stop)
```

**Client:**
```
[SomeIPClient] Instance created
[SomeIPClient] Initializing...
[SomeIPClient] Initialized successfully
[SomeIPClient] Waiting for service...
[SomeIPClient] Connected to service
CPU Load: 45%
CPU Load: 52%
CPU Load: 48%
...
```

---

## ğŸ“ Key Learning Points

### 1. Singleton Implementation (Meyer's Singleton)

```cpp
// Thread-safe since C++11
static SomeIPTelemetrySourceImpl& getInstance() {
    static SomeIPTelemetrySourceImpl instance;  // Created once
    return instance;
}
```

| Aspect | Description |
|--------|-------------|
| **Thread Safety** | C++11 guarantees static local initialization is thread-safe |
| **Lazy Initialization** | Instance created on first `getInstance()` call |
| **Automatic Cleanup** | Destructor called at program exit |

### 2. Adapter Pattern Benefits

| Benefit | Application |
|---------|-------------|
| **Interface Compatibility** | SOME/IP client works with existing `ITelemetrySource` code |
| **Decoupling** | Changes to SOME/IP don't affect logging system |
| **Polymorphism** | Can switch between File/Socket/SOME/IP sources |
| **Testing** | Can mock `ITelemetrySource` without SOME/IP |

### 3. Generated Code Patterns

| Pattern | Generated Class | Purpose |
|---------|-----------------|---------|
| **Proxy** | `TelemetryServiceProxy` | Represents remote service locally |
| **Stub** | `TelemetryServiceStubDefault` | Provides implementation hooks |
| **Factory** | `CommonAPI::Runtime::get()` | Creates runtime instances |
| **Template Method** | `getLoadReply_t` callback | Define response mechanism |

---

## âš ï¸ Common Pitfalls

| Pitfall | Problem | Solution |
|---------|---------|----------|
| Missing environment variables | Service not found | Set `VSOMEIP_CONFIGURATION` and `VSOMEIP_APPLICATION_NAME` |
| Server not running | Connection timeout | Start server before client |
| Wrong port configuration | Communication fails | Ensure `.fdepl` and `vsomeip.json` match |
| Copying singleton | Compilation error | Singleton copy/move are deleted by design |
| Not including SOME/IP headers | Proxy not registered | Include `TelemetryServiceSomeIPProxy.hpp` |

---

## ğŸ“ File Structure

```
Phase 5 Files:
â”œâ”€â”€ fidl/
â”‚   â”œâ”€â”€ TelemetryService.fidl          # Franca interface definition
â”‚   â”œâ”€â”€ TelemetryService.fdepl         # SOME/IP deployment
â”‚   â””â”€â”€ src-gen/                       # Generated code
â”‚       â””â”€â”€ v1/log/
â”‚           â”œâ”€â”€ TelemetryService.hpp
â”‚           â”œâ”€â”€ TelemetryServiceProxy.hpp
â”‚           â”œâ”€â”€ TelemetryServiceProxyBase.hpp
â”‚           â”œâ”€â”€ TelemetryServiceStub.hpp
â”‚           â”œâ”€â”€ TelemetryServiceStubDefault.hpp
â”‚           â”œâ”€â”€ TelemetryServiceSomeIPProxy.cpp
â”‚           â”œâ”€â”€ TelemetryServiceSomeIPStubAdapter.cpp
â”‚           â””â”€â”€ TelemetryServiceSomeIPDeployment.cpp
â”‚
â”œâ”€â”€ include/
â”‚   â”œâ”€â”€ sources/
â”‚   â”‚   â”œâ”€â”€ SomeIPTelemetrySourceImpl.hpp    # Singleton client
â”‚   â”‚   â””â”€â”€ SomeIPTelemetrySourceAdapter.hpp # Adapter
â”‚   â””â”€â”€ services/
â”‚       â””â”€â”€ TelemetryServiceImpl.hpp         # Server implementation
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ sources/
â”‚   â”‚   â”œâ”€â”€ SomeIPTelemetrySourceImpl.cpp
â”‚   â”‚   â”œâ”€â”€ SomeIPTelemetrySourceAdapter.cpp
â”‚   â”‚   â””â”€â”€ CMakeLists.txt
â”‚   â””â”€â”€ services/
â”‚       â”œâ”€â”€ TelemetryServiceImpl.cpp
â”‚       â”œâ”€â”€ TelemetryServiceRunner.cpp       # Server main
â”‚       â””â”€â”€ CMakeLists.txt
â”‚
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ commonapi.ini                        # CommonAPI config
â”‚   â””â”€â”€ vsomeip.json                         # vsomeip config
â”‚
â””â”€â”€ examples/
    â””â”€â”€ phase5_demo.cpp                      # Usage demonstration
```

---

## ğŸ”— Integration with Previous Phases

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    COMPLETE SYSTEM INTEGRATION                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   PHASE 5                     PHASE 2                     PHASE 3           â”‚
â”‚   â•â•â•â•â•â•â•                     â•â•â•â•â•â•â•                     â•â•â•â•â•â•â•           â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚   â”‚SomeIPTelemetry   â”‚   â”‚FileTelemetry     â”‚   â”‚                  â”‚        â”‚
â”‚   â”‚SourceAdapter     â”‚   â”‚SourceImpl        â”‚   â”‚  LogFormatter    â”‚        â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   <Policy>       â”‚        â”‚
â”‚            â”‚                      â”‚             â”‚                  â”‚        â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚  â€¢ CpuPolicy     â”‚        â”‚
â”‚                       â”‚                         â”‚  â€¢ GpuPolicy     â”‚        â”‚
â”‚                       â”‚ ITelemetrySource        â”‚  â€¢ RamPolicy     â”‚        â”‚
â”‚                       â”‚                         â”‚                  â”‚        â”‚
â”‚                       â–¼                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚                  â”‚
â”‚            â”‚ readSource()    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶                  â”‚
â”‚            â”‚ "45"            â”‚          data             â”‚                  â”‚
â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â–¼                  â”‚
â”‚                                              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚                                              â”‚   LogMessage     â”‚           â”‚
â”‚                                              â”‚ â€¢ appName        â”‚           â”‚
â”‚                                              â”‚ â€¢ context: CPU   â”‚           â”‚
â”‚                                              â”‚ â€¢ severity: WARN â”‚           â”‚
â”‚                                              â”‚ â€¢ message        â”‚           â”‚
â”‚                                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                                       â”‚                     â”‚
â”‚   PHASE 1                        PHASE 4              â”‚                     â”‚
â”‚   â•â•â•â•â•â•â•                        â•â•â•â•â•â•â•              â”‚                     â”‚
â”‚                                                       â”‚                     â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚                     â”‚
â”‚   â”‚   ILogSink       â”‚    â”‚   ThreadPool     â”‚        â”‚                     â”‚
â”‚   â”‚ â€¢ ConsoleSink    â”‚â—„â”€â”€â”€â”‚   RingBuffer     â”‚â—„â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚   â”‚ â€¢ FileSink       â”‚    â”‚   Async Flush    â”‚                              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                                                                             â”‚
â”‚   RESULT: Network telemetry seamlessly integrated with entire system!       â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
---

## ğŸ› ï¸ Installation Guide

### Prerequisites

| Requirement | Version | Description |
|-------------|---------|-------------|
| CMake | â‰¥ 3.10 | Build system |
| GCC/G++ | â‰¥ 5.0 | C++14 support required |
| Boost | â‰¥ 1.55 | Required by vsomeip |
| Git | Any | For cloning repositories |

### Step 1: Install Dependencies

```bash
# Ubuntu/Debian
sudo apt-get update
sudo apt-get install -y \
    cmake \
    build-essential \
    libboost-all-dev \
    git \
    default-jre \
    asciidoc \
    source-highlight \
    doxygen \
    graphviz
```

### Step 2: Install vsomeip3

```bash
# Create workspace directory
mkdir -p ~/commonapi_workspace
cd ~/commonapi_workspace

# Clone vsomeip
git clone https://github.com/COVESA/vsomeip.git
cd vsomeip

# Build vsomeip
mkdir build && cd build
cmake -DENABLE_SIGNAL_HANDLING=1 -DDIAGNOSIS_ADDRESS=0x10 ..
make -j$(nproc)
sudo make install

# Update library cache
sudo ldconfig
```

### Step 3: Install CommonAPI Core Runtime

```bash
cd ~/commonapi_workspace

# Clone CommonAPI Core Runtime
git clone https://github.com/COVESA/capicxx-core-runtime.git
cd capicxx-core-runtime

# Build
mkdir build && cd build
cmake ..
make -j$(nproc)
sudo make install

sudo ldconfig
```

### Step 4: Install CommonAPI SOME/IP Runtime

```bash
cd ~/commonapi_workspace

# Clone CommonAPI SOME/IP Runtime
git clone https://github.com/COVESA/capicxx-someip-runtime.git
cd capicxx-someip-runtime

# Build
mkdir build && cd build
cmake -DUSE_INSTALLED_COMMONAPI=ON ..
make -j$(nproc)
sudo make install

sudo ldconfig
```

### Step 5: Download Code Generators

```bash
cd ~/commonapi_workspace

# Create generators directory
mkdir -p generators && cd generators

# Download CommonAPI Core Generator
wget https://github.com/COVESA/capicxx-core-tools/releases/download/3.2.14/commonapi_core_generator.zip
unzip commonapi_core_generator.zip -d commonapi_core_generator

# Download CommonAPI SOME/IP Generator
wget https://github.com/COVESA/capicxx-someip-tools/releases/download/3.2.14/commonapi_someip_generator.zip
unzip commonapi_someip_generator.zip -d commonapi_someip_generator

# Make generators executable
chmod +x commonapi_core_generator/commonapi-core-generator-linux-x86_64
chmod +x commonapi_someip_generator/commonapi-someip-generator-linux-x86_64
```

### Step 6: Setup Aliases (Recommended)

Add to your `~/.bashrc` or `~/.zshrc`:

```bash
# CommonAPI Code Generators
alias fidl_gen="~/commonapi_workspace/generators/commonapi_core_generator/commonapi-core-generator-linux-x86_64"
alias fdepl_gen="~/commonapi_workspace/generators/commonapi_someip_generator/commonapi-someip-generator-linux-x86_64"

# Reload shell configuration
source ~/.bashrc
```

### Verify Installation

```bash
# Check vsomeip
pkg-config --modversion vsomeip3

# Check CommonAPI
pkg-config --modversion CommonAPI

# Check CommonAPI-SomeIP
pkg-config --modversion CommonAPI-SomeIP

# Check generators
fidl_gen --help
fdepl_gen --help
```

---

## ğŸ“ Code Generation from Franca IDL

### Franca Files Structure

```
fidl/
â”œâ”€â”€ TelemetryService.fidl      # Interface definition
â”œâ”€â”€ TelemetryService.fdepl     # SOME/IP deployment
â””â”€â”€ src-gen/                   # Generated code output
    â””â”€â”€ v1/
        â””â”€â”€ log/
            â”œâ”€â”€ TelemetryService.hpp
            â”œâ”€â”€ TelemetryServiceProxy.hpp
            â”œâ”€â”€ TelemetryServiceProxyBase.hpp
            â”œâ”€â”€ TelemetryServiceStub.hpp
            â”œâ”€â”€ TelemetryServiceStubDefault.hpp
            â”œâ”€â”€ TelemetryServiceSomeIPProxy.cpp
            â”œâ”€â”€ TelemetryServiceSomeIPStubAdapter.cpp
            â””â”€â”€ TelemetryServiceSomeIPDeployment.cpp
```

### Generation Commands

```bash
# Navigate to project root
cd /path/to/Telemetry_and_Logging-System

# Create output directory
mkdir -p fidl/src-gen

# Generate CommonAPI Core code (interfaces, proxies, stubs)
fidl_gen fidl/TelemetryService.fidl -sk -d fidl/src-gen/

# Generate SOME/IP specific code (deployment, serialization)
fdepl_gen fidl/TelemetryService.fdepl -d fidl/src-gen/
```

### Generator Options

| Option | Description |
|--------|-------------|
| `-sk` | Generate skeleton (stub default implementation) |
| `-d <path>` | Output directory for generated files |

### Generation Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CODE GENERATION FLOW                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   INPUT FILES                                                               â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•                                                               â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  TelemetryService.fidl                                              â”‚   â”‚
â”‚   â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                               â”‚   â”‚
â”‚   â”‚  package log                                                        â”‚   â”‚
â”‚   â”‚  interface TelemetryService {                                       â”‚   â”‚
â”‚   â”‚      version {major 1 minor 0}                                      â”‚   â”‚
â”‚   â”‚      method getLoad {                                               â”‚   â”‚
â”‚   â”‚          out { UInt8 loadPercentage }                               â”‚   â”‚
â”‚   â”‚      }                                                              â”‚   â”‚
â”‚   â”‚  }                                                                  â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                                                  â”‚
â”‚                          â–¼                                                  â”‚
â”‚                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚                 â”‚   fidl_gen -sk  â”‚                                         â”‚
â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚                          â”‚                                                  â”‚
â”‚                          â–¼                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  GENERATED: CommonAPI Core Files                                    â”‚   â”‚
â”‚   â”‚  â€¢ TelemetryService.hpp          (Interface definition)             â”‚   â”‚
â”‚   â”‚  â€¢ TelemetryServiceProxy.hpp     (Client-side proxy)                â”‚   â”‚
â”‚   â”‚  â€¢ TelemetryServiceProxyBase.hpp (Proxy base class)                 â”‚   â”‚
â”‚   â”‚  â€¢ TelemetryServiceStub.hpp      (Server-side interface)            â”‚   â”‚
â”‚   â”‚  â€¢ TelemetryServiceStubDefault.hpp (Default implementation)         â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  TelemetryService.fdepl                                             â”‚   â”‚
â”‚   â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                            â”‚   â”‚
â”‚   â”‚  import "TelemetryService.fidl"                                     â”‚   â”‚
â”‚   â”‚  define ... for interface log.TelemetryService {                    â”‚   â”‚
â”‚   â”‚      SomeIpServiceID = 0x4666                                       â”‚   â”‚
â”‚   â”‚      method getLoad { SomeIpMethodID = 0x01 }                       â”‚   â”‚
â”‚   â”‚  }                                                                  â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â”‚                                                  â”‚
â”‚                          â–¼                                                  â”‚
â”‚                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                         â”‚
â”‚                 â”‚   fdepl_gen     â”‚                                         â”‚
â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                         â”‚
â”‚                          â”‚                                                  â”‚
â”‚                          â–¼                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚  GENERATED: SOME/IP Binding Files                                   â”‚   â”‚
â”‚   â”‚  â€¢ TelemetryServiceSomeIPProxy.cpp      (SOME/IP client impl)       â”‚   â”‚
â”‚   â”‚  â€¢ TelemetryServiceSomeIPStubAdapter.cpp (SOME/IP server adapter)   â”‚   â”‚
â”‚   â”‚  â€¢ TelemetryServiceSomeIPDeployment.cpp  (Deployment constants)     â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”§ Build Instructions

### Build the Complete Project

```bash
# Navigate to project root
cd /path/to/Telemetry_and_Logging-System

# Configure and build the demo (includes client)
cmake -S ./examples -B build -DApp_Source_File=phase5_demo.cpp
cmake --build build

# Build the server separately
cmake -S ./src/services -B build/server_build
cmake --build build/server_build
```

### Build Output Structure

```
build/
â”œâ”€â”€ Demo                    # Client executable
â”œâ”€â”€ server_build/
â”‚   â””â”€â”€ ServerSomeIp        # Server executable
â”œâ”€â”€ sources_build/
â”‚   â””â”€â”€ libsources.a        # Sources library (includes SOME/IP client)
â””â”€â”€ ...                     # Other build artifacts
```

---

## ğŸš€ Running the Application

### Quick Start Script

Create a script `run_phase5.sh`:

```bash
#!/bin/bash

# Project root directory
PROJECT_ROOT="/path/to/Telemetry_and_Logging-System"

# Clean up any stale vsomeip files
sudo rm -f /tmp/vsomeip*

# Export common environment variables
export COMMONAPI_CONFIG=${PROJECT_ROOT}/config/commonapi.ini
export VSOMEIP_CONFIGURATION=${PROJECT_ROOT}/config/vsomeip-local.json

echo "============================================"
echo "   Starting Telemetry SOME/IP Demo"
echo "============================================"
echo ""
echo "Run these commands in separate terminals:"
echo ""
echo "Terminal 1 (Server):"
echo "  export VSOMEIP_APPLICATION_NAME=server"
echo "  ${PROJECT_ROOT}/build/server_build/ServerSomeIp"
echo ""
echo "Terminal 2 (Client):"
echo "  export VSOMEIP_APPLICATION_NAME=client"
echo "  ${PROJECT_ROOT}/build/Demo"
echo ""
```

### Manual Execution

#### Terminal 1: Start the Server

```bash
# Navigate to project root
cd /path/to/Telemetry_and_Logging-System

# Clean up stale vsomeip shared memory files
sudo rm -f /tmp/vsomeip*

# Set environment variables
export COMMONAPI_CONFIG=$(pwd)/config/commonapi.ini
export VSOMEIP_CONFIGURATION=$(pwd)/config/vsomeip-local.json
export VSOMEIP_APPLICATION_NAME=server

# Run the server
./build/server_build/ServerSomeIp
```

#### Terminal 2: Start the Client

```bash
# Navigate to project root
cd /path/to/Telemetry_and_Logging-System

# Set environment variables
export COMMONAPI_CONFIG=$(pwd)/config/commonapi.ini
export VSOMEIP_CONFIGURATION=$(pwd)/config/vsomeip-local.json
export VSOMEIP_APPLICATION_NAME=client

# Run the client
./build/Demo
```

### Environment Variables Explained

| Variable | Purpose | Example Value |
|----------|---------|---------------|
| `COMMONAPI_CONFIG` | Path to CommonAPI configuration | `$(pwd)/config/commonapi.ini` |
| `VSOMEIP_CONFIGURATION` | Path to vsomeip JSON config | `$(pwd)/config/vsomeip-local.json` |
| `VSOMEIP_APPLICATION_NAME` | Identifies the application | `server` or `client` |

### Execution Flow Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         EXECUTION FLOW                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   STEP 1: Clean Shared Memory                                               â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                               â”‚
â”‚                                                                             â”‚
â”‚   sudo rm -f /tmp/vsomeip*                                                  â”‚
â”‚   â”‚                                                                         â”‚
â”‚   â””â”€â”€â–¶ Removes stale IPC files from previous runs                           â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   STEP 2: Start Server (Terminal 1)                                         â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                         â”‚
â”‚                                                                             â”‚
â”‚   export VSOMEIP_APPLICATION_NAME=server                                    â”‚
â”‚   ./ServerSomeIp                                                            â”‚
â”‚   â”‚                                                                         â”‚
â”‚   â”œâ”€â”€â–¶ Loads vsomeip-local.json configuration                               â”‚
â”‚   â”œâ”€â”€â–¶ Registers as routing manager (first application)                     â”‚
â”‚   â”œâ”€â”€â–¶ Creates TelemetryServiceImpl                                         â”‚
â”‚   â”œâ”€â”€â–¶ Registers service with CommonAPI                                     â”‚
â”‚   â””â”€â”€â–¶ Waits for client requests                                            â”‚
â”‚                                                                             â”‚
â”‚   OUTPUT:                                                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ ========================================                            â”‚   â”‚
â”‚   â”‚    Telemetry Service Server                                         â”‚   â”‚
â”‚   â”‚ ========================================                            â”‚   â”‚
â”‚   â”‚ [Server] âœ“ Service registered successfully!                         â”‚   â”‚
â”‚   â”‚ [Server] Waiting for clients... (Ctrl+C to stop)                    â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   STEP 3: Start Client (Terminal 2)                                         â”‚
â”‚   â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                         â”‚
â”‚                                                                             â”‚
â”‚   export VSOMEIP_APPLICATION_NAME=client                                    â”‚
â”‚   ./Demo                                                                    â”‚
â”‚   â”‚                                                                         â”‚
â”‚   â”œâ”€â”€â–¶ Creates SomeIPTelemetrySourceAdapter                                 â”‚
â”‚   â”œâ”€â”€â–¶ Gets singleton SomeIPTelemetrySourceImpl                             â”‚
â”‚   â”œâ”€â”€â–¶ Initializes CommonAPI runtime                                        â”‚
â”‚   â”œâ”€â”€â–¶ Builds proxy for TelemetryService                                    â”‚
â”‚   â”œâ”€â”€â–¶ Waits for service availability                                       â”‚
â”‚   â”œâ”€â”€â–¶ Calls getLoad() method                                               â”‚
â”‚   â””â”€â”€â–¶ Receives CPU load percentage                                         â”‚
â”‚                                                                             â”‚
â”‚   OUTPUT:                                                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚   â”‚ [SomeIPClient] Instance created                                     â”‚   â”‚
â”‚   â”‚ [SomeIPClient] Initializing...                                      â”‚   â”‚
â”‚   â”‚ [SomeIPClient] Initialized successfully                             â”‚   â”‚
â”‚   â”‚ [SomeIPClient] Waiting for service...                               â”‚   â”‚
â”‚   â”‚ [SomeIPClient] Connected to service                                 â”‚   â”‚
â”‚   â”‚ CPU Load: 45%                                                       â”‚   â”‚
â”‚   â”‚ CPU Load: 52%                                                       â”‚   â”‚
â”‚   â”‚ ...                                                                 â”‚   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› Troubleshooting

### Common Issues

| Issue | Cause | Solution |
|-------|-------|----------|
| "Failed to get CommonAPI runtime" | Missing configuration | Check `COMMONAPI_CONFIG` path |
| "Service not available" | Server not running | Start server before client |
| "Connection timeout" | Wrong configuration | Verify `vsomeip-local.json` settings |
| Permission denied on `/tmp/vsomeip*` | Previous run with sudo | Run `sudo rm -f /tmp/vsomeip*` |
| "No factory found" | SOME/IP binding not registered | Ensure proxy headers are included |

### Debug Mode

Enable verbose logging for debugging:

```bash
# In vsomeip-local.json, change:
"logging": {
    "level": "debug",    # Changed from "fatal"
    "console": "true"    # Changed from "false"
}
```

### Verify Service Discovery

```bash
# Check if multicast is working
ip maddr show | grep 224.224.224.245

# Check UDP port
netstat -ulnp | grep 30490
```

---

## ğŸ“ Complete File Structure (Phase 5)

```
Telemetry_and_Logging-System/
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ commonapi.ini              # CommonAPI binding configuration
â”‚   â””â”€â”€ vsomeip-local.json         # vsomeip network configuration
â”‚
â”œâ”€â”€ fidl/
â”‚   â”œâ”€â”€ TelemetryService.fidl      # Franca interface definition
â”‚   â”œâ”€â”€ TelemetryService.fdepl     # SOME/IP deployment specification
â”‚   â””â”€â”€ src-gen/                   # Generated code
â”‚       â””â”€â”€ v1/
â”‚           â””â”€â”€ log/
â”‚               â”œâ”€â”€ TelemetryService.hpp
â”‚               â”œâ”€â”€ TelemetryServiceProxy.hpp
â”‚               â”œâ”€â”€ TelemetryServiceProxyBase.hpp
â”‚               â”œâ”€â”€ TelemetryServiceStub.hpp
â”‚               â”œâ”€â”€ TelemetryServiceStubDefault.hpp
â”‚               â”œâ”€â”€ TelemetryServiceSomeIPProxy.cpp
â”‚               â”œâ”€â”€ TelemetryServiceSomeIPStubAdapter.cpp
â”‚               â””â”€â”€ TelemetryServiceSomeIPDeployment.cpp
â”‚
â”œâ”€â”€ include/
â”‚   â”œâ”€â”€ sources/
â”‚   â”‚   â”œâ”€â”€ ITelemetrySource.hpp
â”‚   â”‚   â”œâ”€â”€ SomeIPTelemetrySourceImpl.hpp
â”‚   â”‚   â””â”€â”€ SomeIPTelemetrySourceAdapter.hpp
â”‚   â””â”€â”€ services/
â”‚       â””â”€â”€ TelemetryServiceImpl.hpp
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ sources/
â”‚   â”‚   â”œâ”€â”€ SomeIPTelemetrySourceImpl.cpp
â”‚   â”‚   â”œâ”€â”€ SomeIPTelemetrySourceAdapter.cpp
â”‚   â”‚   â””â”€â”€ CMakeLists.txt
â”‚   â””â”€â”€ services/
â”‚       â”œâ”€â”€ TelemetryServiceImpl.cpp
â”‚       â”œâ”€â”€ TelemetryServiceRunner.cpp
â”‚       â””â”€â”€ CMakeLists.txt
â”‚
â”œâ”€â”€ examples/
â”‚   â”œâ”€â”€ CMakeLists.txt
â”‚   â””â”€â”€ phase5_demo.cpp
â”‚
â””â”€â”€ build/                         # Build output
   â”œâ”€â”€ Demo                       # Client executable
   â””â”€â”€ server_build/
       â””â”€â”€ ServerSomeIp           # Server executable

```

---

## ğŸ“‹ Quick Reference Card

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    PHASE 5 QUICK REFERENCE                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚  CODE GENERATION                                                            â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•                                                            â”‚
â”‚  fidl_gen fidl/TelemetryService.fidl -sk -d fidl/src-gen/                   â”‚
â”‚  fdepl_gen fidl/TelemetryService.fdepl -d fidl/src-gen/                     â”‚
â”‚                                                                             â”‚
â”‚  BUILD                                                                      â”‚
â”‚  â•â•â•â•â•                                                                      â”‚
â”‚  cmake -S ./examples -B build -DApp_Source_File=phase5_demo.cpp             â”‚
â”‚  cmake --build build                                                        â”‚
â”‚  cmake -S ./src/services -B build/server_build                              â”‚
â”‚  cmake --build build/server_build                                           â”‚
â”‚                                                                             â”‚
â”‚  RUN SERVER                                                                 â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•                                                                 â”‚
â”‚  sudo rm -f /tmp/vsomeip*                                                   â”‚
â”‚  export COMMONAPI_CONFIG=$(pwd)/config/commonapi.ini                        â”‚
â”‚  export VSOMEIP_CONFIGURATION=$(pwd)/config/vsomeip-local.json              â”‚
â”‚  export VSOMEIP_APPLICATION_NAME=server                                     â”‚
â”‚  ./build/server_build/ServerSomeIp                                          â”‚
â”‚                                                                             â”‚
â”‚  RUN CLIENT                                                                 â”‚
â”‚  â•â•â•â•â•â•â•â•â•â•                                                                 â”‚
â”‚  export COMMONAPI_CONFIG=$(pwd)/config/commonapi.ini                        â”‚
â”‚  export VSOMEIP_CONFIGURATION=$(pwd)/config/vsomeip-local.json              â”‚
â”‚  export VSOMEIP_APPLICATION_NAME=client                                     â”‚
â”‚  ./build/Demo                                                               â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```
